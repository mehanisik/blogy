---
import type { Publication } from "../lib/api";

interface Props {
  publications: Publication[];
}

const { publications } = Astro.props;
---

<section
    id="publications"
    class="max-w-[var(--container-width)] mx-auto px-6 py-32"
>
    <div class="mb-20">
        <h2
            class="font-display text-[var(--text-h1)] leading-none text-[var(--ink)] tracking-tight"
            data-animate="section"
        >
            Publications
        </h2>
    </div>

    <div class="space-y-12">
        {
            publications.map((pub) => (
                <article class="group" data-animate="section">
                    <div class="grid md:grid-cols-12 gap-4 md:gap-8">
                        <div class="md:col-span-3">
                            <p class="font-mono text-sm text-[var(--ink-muted)] pt-1">
                                {new Date(pub.date).getFullYear()}
                            </p>
                        </div>

                        <div class="md:col-span-9 space-y-3">
                            <h3 class="font-display text-[var(--text-body-l)] font-medium text-[var(--ink)]">
                                {pub.pdf || pub.doi ? (
                                    <a
                                        href={pub.pdf || pub.doi || "#"}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        class="hover:text-[var(--ink-muted)] transition-colors inline-flex items-center gap-2"
                                    >
                                        {pub.title}
                                        <span class="opacity-50 text-sm">
                                            â†—
                                        </span>
                                    </a>
                                ) : (
                                    pub.title
                                )}
                            </h3>
                            <p class="font-body text-[var(--text-body)] text-[var(--ink-muted)]">
                                {pub.authors}
                            </p>
                            <div class="flex flex-wrap gap-x-4 gap-y-2 text-sm font-mono text-[var(--ink-muted)] opacity-80">
                                {pub.journal && (
                                    <span>{pub.journal.join(", ")}</span>
                                )}
                                {pub.institution && (
                                    <span>{pub.institution}</span>
                                )}
                            </div>
                        </div>
                    </div>
                </article>
            ))
        }
    </div>
</section>
