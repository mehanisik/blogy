---
import type { Project } from "../lib/api";

interface Props {
  projects: Project[];
}

const { projects } = Astro.props;
---

<section
	id="projects"
	class="max-w-[var(--container-width)] mx-auto px-6 py-32"
>
	<div class="mb-20 flex items-end justify-between">
		<h2
			class="font-display text-[var(--text-h1)] leading-none text-[var(--ink)] tracking-tight"
			data-animate="section"
		>
			Selected<br />Works
		</h2>
		<span
			class="font-mono text-sm text-[var(--ink-muted)] hidden md:block mb-2"
		>
			(2021 — Present)
		</span>
	</div>

	<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
		{
			projects.map((project, index) => (
				<a
					href={project.demo || project.github || "#"}
					target="_blank"
					rel="noopener noreferrer"
					class={`group relative flex flex-col justify-between p-8 rounded-2xl bg-[var(--surface)] hover:bg-[var(--line)] transition-colors duration-500 ${index === 0 ? "md:col-span-2 md:min-h-[400px]" : "min-h-[300px]"}`}
					data-animate="project-card"
				>
					<div class="flex justify-between items-start w-full">
						<span class="font-mono text-xs text-[var(--ink-muted)] border border-[var(--line)] px-2 py-1 rounded-full bg-[var(--bg)]">
							0{index + 1}
						</span>
						<span class="font-mono text-2xl text-[var(--ink)] opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0">
							↗
						</span>
					</div>

					<div class="space-y-4 max-w-xl">
						<h3 class="font-display text-[var(--text-h2)] text-[var(--ink)] leading-tight">
							{project.title}
						</h3>
						<p class="font-body text-[var(--text-body)] text-[var(--ink-muted)] leading-relaxed line-clamp-3">
							{project.description}
						</p>
						{project.technologies && (
							<div class="flex flex-wrap gap-2 pt-2">
								{project.technologies.map((tech) => (
									<span class="font-mono text-xs text-[var(--ink-muted)] bg-[var(--bg)] px-2 py-1 rounded border border-[var(--line)]">
										{tech}
									</span>
								))}
							</div>
						)}
					</div>
				</a>
			))
		}
	</div>
</section>
