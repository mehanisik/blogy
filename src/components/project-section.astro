---
import type { Project } from "../lib/api";

interface Props {
    projects: Project[];
}
const { projects } = Astro.props;
---

<div class="flex flex-col gap-24">
    {
        projects.map((project, index) => (
            <a
                href={project.demo || project.github || "#"}
                target="_blank"
                rel="noopener noreferrer"
                class="group block"
                aria-label={`View project: ${project.title}`}
            >
                <div class="grid grid-cols-1 md:grid-cols-12 gap-8 items-start">
                    <div class="md:col-span-4 flex flex-col justify-between h-full py-2">
                        <div>
                            <span class="text-xs font-mono text-[var(--accent-color)] mb-4 block">
                                0{index + 1}
                            </span>
                            <h3 class="text-3xl font-bold mb-4 group-hover:text-[var(--accent-color)] transition-colors duration-300">
                                {project.title}
                            </h3>
                            <p class="text-[var(--text-secondary)] leading-relaxed mb-6 text-sm max-w-xs">
                                {project.description}
                            </p>
                        </div>

                        {project.technologies && (
                            <div class="flex flex-wrap gap-x-4 gap-y-2 text-xs font-mono text-[var(--text-tertiary)] uppercase tracking-wider">
                                {project.technologies
                                    .slice(0, 4)
                                    .map((tech) => (
                                        <span>{tech}</span>
                                    ))}
                            </div>
                        )}
                    </div>

                    <div class="md:col-span-8 overflow-hidden">
                        <div class="aspect-[16/9] bg-[var(--bg-secondary)] relative overflow-hidden group-hover:scale-[1.02] transition-transform duration-500 ease-out border border-[var(--border-color)] rounded-none">
                            <img
                                src={
                                    project.image_url || "/default-project.png"
                                }
                                alt={project.title}
                                class="absolute inset-0 w-full h-full object-cover"
                            />

                            <div class="absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors duration-300" />

                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="font-mono text-[var(--text-tertiary)] text-xs uppercase tracking-widest opacity-0 group-hover:opacity-100 group-hover:text-[var(--accent-color)] transition-all duration-300">
                                    View Project
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        ))
    }
</div>
